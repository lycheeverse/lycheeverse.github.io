---
title: Checking Anchor Links (Fragment Identifiers)
---

import { Aside } from "@astrojs/starlight/components";

lychee can check anchor links (also called fragments) in both HTML and Markdown files.

## Enable Fragment Checking

```bash
lychee --include-fragments docs/
```

Or in your config:

```toml title="lychee.toml"
include_fragments = true
```

## How It Works

lychee generates fragments using two methods:

**1. Explicit IDs:**

```markdown
## My Heading {#custom-id}
```

```html
<h2 id="custom-id">My Heading</h2>
```

**2. Auto-Generated from Headings:**

```markdown
## Getting Started
```

Fragment: `#getting-started`

<Aside type="note">
  Auto-generated fragments use lowercase and replace spaces with hyphens, following GitHub's anchor generation rules.
</Aside>

## Supported Formats

| Feature                 | Markdown | HTML | Inline HTML in Markdown |
| ----------------------- | -------- | ---- | ----------------------- |
| Heading-based fragments | ✅       | ✅   | ✅                      |
| Custom ID fragments     | ✅       | ✅   | ✅                      |
| Unicode in fragments    | ✅       | ✅   | ✅                      |
| Inline code in headings | ✅       | N/A  | N/A                     |

## Examples

**Valid:**

```markdown
# Documentation

## Getting Started {#start}
## API Reference

[Jump to start](#start)              ✓ Valid
[See API](#api-reference)            ✓ Valid
```

**Invalid:**

```markdown
# Documentation

## Getting Started

[Wrong link](#getting_started)       ✗ Invalid (underscore instead of hyphen)
[Wrong link](#nonexistent)           ✗ Invalid (heading doesn't exist)
```

## Limitations

- **JavaScript-generated anchors** - Elements created dynamically aren't visible to lychee
- **Complex nested HTML** - Very complex HTML structures might not be fully parsed
- **Framework-specific features** - Some static site generators use custom anchor generation

<Aside type="caution">
  Fragment checking requires parsing file content, which can be slower. Use caching to improve performance.
</Aside>

## Troubleshooting

### Use Explicit IDs

If lychee reports valid anchors as broken, use explicit IDs:

```markdown
## My Section {#my-section}
```

### Check Fragment Format

lychee uses GitHub-style kebab-case. For complex headings with special characters:

```markdown
## Complex Heading: With "Quotes" {#complex-heading}
```
